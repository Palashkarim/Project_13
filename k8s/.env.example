# =========================
# CORE PLATFORM ENV VARS
# Copy this file to `.env` and fill in real values.
# =========================

# ----- GENERAL -----
APP_ENV=production
APP_DEBUG=false
APP_URL=https://iot.example.com   # your domain or IP with https

# ----- JWT / AUTH -----
JWT_SECRET=change-this-to-64-char-random
PASSWORD_HASH_ROUNDS=12

# ----- DATABASE (PostgreSQL + Timescale) -----
DB_HOST=db
DB_PORT=5432
DB_NAME=iot_core
DB_USER=iot_user
DB_PASSWORD=Strong_DB_Password_ChangeMe
DB_SSLMODE=disable   # or require if using TLS inside cluster

# ----- REDIS (optional for caching/queues) -----
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ----- MQTT (Mosquitto) -----
MQTT_HOST=mqtt
MQTT_PORT=1883         # 8883 if TLS
MQTT_TLS_ENABLED=false # set true if using TLS
MQTT_USER=broker_admin # management user for server side (not device users)
MQTT_PASSWORD=ChangeThis_MQTT_Admin_Password
MQTT_ACL_MODE=db       # db|file - we use db-backed ACLs via server API sync

# ----- OTA (firmware encryption/signing) -----
OTA_AES_KEY_BASE64=REPLACE_WITH_BASE64_32BYTES_KEY
OTA_SIGNING_PRIVATE_KEY_PEM=/run/secrets/ota_signing_key # if using PKI signing

# ----- MAIL (Notifications) -----
MAIL_DRIVER=smtp
MAIL_HOST=mail
MAIL_PORT=25
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_FROM=notifications@iot.example.com
MAIL_FROM_NAME="IoT Platform"

# ----- PUSH / PWA -----
PUSH_PUBLIC_KEY=YourVapidPublicKey
PUSH_PRIVATE_KEY=YourVapidPrivateKey

# ----- FILE STORAGE -----
STORAGE_PATH=/var/iot/storage
FIRMWARE_BUILDS_DIR=/var/iot/storage/firmware_builds
EXPORT_JOBS_DIR=/var/iot/storage/export_jobs

# ----- LOGGING -----
LOG_CHANNEL=stdout
LOG_LEVEL=info

# ----- PROMETHEUS EXPORT -----
PROM_ENABLE=true
PROM_PORT=9100

# ----- NGINX -----
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ----- TLS (reverse proxy) -----
TLS_CERT_PATH=/etc/nginx/certs/server.crt
TLS_KEY_PATH=/etc/nginx/certs/server.key
TLS_CHAIN_PATH=/etc/nginx/certs/chain.crt

# ----- AI ENGINE (Python) -----
AI_ENGINE_URL=http://ai_engine:8000